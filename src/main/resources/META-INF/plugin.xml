<idea-plugin>
    <id>com.aiclient.intellij</id>
    <name>FocusFlow</name>
    <vendor email="support@example.com" url="https://example.com">FocusFlow Team</vendor>

    <description><![CDATA[
    <p>FocusFlow: An intelligent coding assistant integrated directly into IntelliJ IDEA.</p>
    <h3>Features:</h3>
    <ul>
        <li><b>FocusFlow Chat</b> - Have conversations with AI about your code</li>
        <li><b>Code Assistance</b> - Get explanations, improvements, and documentation for selected code</li>
        <li><b>Multiple Providers</b> - Support for OpenAI, Anthropic, and custom endpoints</li>
        <li><b>Streaming Responses</b> - Real-time display of AI responses</li>
    </ul>
    ]]></description>

    <depends>com.intellij.modules.platform</depends>
    <depends>com.intellij.modules.lang</depends>

    <extensions defaultExtensionNs="com.intellij">
        <!-- Tool Window for FocusFlow -->
        <toolWindow id="FocusFlow" 
                    anchor="right" 
                    icon="AllIcons.Actions.Lightning"
                    factoryClass="com.aiclient.ui.AiChatToolWindowFactory"/>

        <!-- Application-level Settings -->
        <applicationService serviceImplementation="com.aiclient.settings.AiClientSettings"/>
        
        <!-- Settings Configurable Panel -->
        <applicationConfigurable parentId="tools"
                                 instance="com.aiclient.settings.AiClientSettingsConfigurable"
                                 id="com.aiclient.settings.AiClientSettingsConfigurable"
                                 displayName="FocusFlow"/>
        
        <!-- Project-level AI Service -->
        <projectService serviceImplementation="com.aiclient.service.AiClientService"/>
        
        <!-- Notification Group -->
        <notificationGroup id="FocusFlow Notifications" 
                           displayType="BALLOON"/>
    </extensions>

    <actions>
        <!-- AI Assist Actions Group -->
        <group id="AiClient.EditorGroup" 
               text="FocusFlow" 
               popup="true"
               icon="AllIcons.Actions.Lightning">
            
            <action id="AiClient.ExplainCode"
                    class="com.aiclient.action.ExplainCodeAction"
                    text="Explain Code"
                    description="Ask AI to explain the selected code"
                    icon="AllIcons.Actions.Help"/>
            
            <action id="AiClient.WhatAmIDoing" class="com.aiclient.action.WhatAmIDoingAction"
                    text="What Am I Doing?" description="Analyze code context to summarize current task">
            </action>
            
            <action id="AiClient.DetectErrors" class="com.aiclient.action.DetectErrorsAction"
                    text="Detect Errors" description="Find bugs and get hints or solution">
            </action>
            
            <action id="AiClient.ImproveCode"
                    class="com.aiclient.action.ImproveCodeAction"
                    text="Improve Code"
                    description="Ask AI to suggest improvements for the selected code"
                    icon="AllIcons.Actions.SuggestedRefactoringBulb"/>
            
            <reference id="AiClient.DetectErrors"/>
            <separator/>
            <reference id="AiClient.WhatAmIDoing"/>
            <separator/>
            
            <action id="AiClient.GenerateBlogPost"
                    class="com.aiclient.action.GenerateBlogPostAction"
                    text="Generate Blog Post"
                    description="Generate an HTML blog post documenting the selected code"
                    icon="AllIcons.Actions.Edit"/>
            
            <action id="AiClient.GenerateLinkedInPost"
                    class="com.aiclient.action.GenerateLinkedInPostAction"
                    text="Generate LinkedIn Post"
                    description="Draft a professional LinkedIn post about this code"
                    icon="AllIcons.ToolbarDecorator.Export"/>
            
            <add-to-group group-id="EditorPopupMenu" anchor="last"/>
        </group>
        
        <!-- Keyboard Shortcut Action -->
        <action id="AiClient.QuickAsk"
                class="com.aiclient.action.QuickAskAction"
                text="FocusFlow Quick Ask"
                description="Quickly ask FocusFlow about selected code">
            <keyboard-shortcut keymap="$default" first-keystroke="control alt A"/>
            <add-to-group group-id="ToolsMenu" anchor="last"/>
        </action>
    </actions>
</idea-plugin>
